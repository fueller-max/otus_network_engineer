###    VLAN. Конфигурирование "Router-on-a-stick Inter-VLAN Routing"


###  Задание:

1. Создание сети и настройка основных параметров устройств.
2. Создание VLAN и назначение портов коммутаторов
3. Настройка транка 802.1Q между коммутаторами
4. Настройка маршрутизации между VLAN на маршрутизаторе
5. Проверка работы маршрутизации между VLAN


###  Решение:

1. [Создание сети в виртуальной среде EVE-NG](Readme.md#1-создание-сети-в-виртуальной-среде-eve-ng) 

2. [Создание VLAN и назначение портов коммутаторов](Readme.md#2-создание-vlan-и-назначение-портов-коммутаторов)

3. [Настройка транка 802.1Q между коммутаторами](Readme.md#3-настройка-транка-8021q-между-коммутаторами)

4. [Настройка маршрутизации между VLAN на маршрутизаторе](Readme.md#4-настройка-маршрутизации-между-vlan-на-маршрутизаторе)

5. [Проверка работы маршрутизации между VLAN](Readme.md#5-проверка-работы-маршрутизации-между-vlan)

<br>

### 1. Создание сети в виртуальной среде EVE-NG

![](/Labs/Lab01/pics/Lab_eve.png)

Схема состоит из двух коммутаторов S1 и S2, роутера R1 и двух рабочих станций PC-A и PC-B. Подключения портов показаны на  представленной схеме.

Таблица адресации имеет следующий вид:

|Device|Interface|IP Address|Subnet mask|Default Gateway|
|----:|:-----:|:------:|:----:|:---|
|R1   |G0/0.3 | 192.168.3.1| /24 | N/A|
|     |G0/0.4| 192.168.4.1| /24|N/A|
|     |G0/0.8| N/A| N/A|N/A|
|PC-A |NIC   | 192.168.3.3| /24 | 192.168.3.1|
|PC-A |NIC   | 192.168.4.3| /24 | 192.168.4.1|

<br>


### 2. Создание VLAN и назначение портов коммутаторов
![](/Labs/Lab01/pics/IP&Vlan.png)

VLAN таблица имеет следующий вид:


|VLAN     |Name      | Interface Assigned|
|--------:|:--------:|:---------:|
|3        |Management|S1: VLAN3 <br> S2: VLAN3 <br> S1: G0/2  |
|4        |Operations|S2:G0/2            |
|7        |ParkingLot|  All unused port of S1/S2|
|8        |Native    | N/A |


<br>

Результаты настройки VLAN в роутере S1


![](/Labs/Lab01/pics/S1_vlans.png)

*порт G3/3 находится в default VLAN(множественный интерефейс в конфиге(баг..фича?)) 

<br>

Результаты настройки VLAN в роутере S2


![](/Labs/Lab01/pics/S2_vlans.png)

<br>

### 3. Настройка транка 802.1Q между коммутаторами

Результаты настройки trunk на коммутаторе S1
![](/Labs/Lab01/pics/S1_trunk.png)

Результаты настройки trunk на коммутаторе S2
![](/Labs/Lab01/pics/S2_trunk.png)

<br>

### 4. Настройка маршрутизации между VLAN на маршрутизаторе

Результат настройки VLAN для подинтерфейсов роутера R1
![](/Labs/Lab01/pics/R1_ip_interface.png)

<br>

### 5. Проверка работы маршрутизации между VLAN

Проверка доступа шлюза по умолчанию (R1) станции PC-A
![](/Labs/Lab01/pics/PC_A_DG.png)

Проверка доступа шлюза по умолчанию (R1) станции PC-B
![](/Labs/Lab01/pics/PC_B_DG.png)

Проверка доступа PC-B со станции PC-A
![](/Labs/Lab01/pics/PC_A_to_PC_B.png)

Проверка доступа PC-A со станции PC-B
![](/Labs/Lab01/pics/PC_B_to_PC_A.png)



