### OSPF

### Цель:

1. Настроить OSPF офисе Москва
2. Разделить сеть на зоны
3. Настроить фильтрацию между зонами


###  Задание:

1. Маршрутизаторы R14-R15 находятся в зоне 0 - backbone.
2. Маршрутизаторы R12-R13 находятся в зоне 10. Дополнительно к маршрутам должны  получать маршрут по умолчанию.
4. Маршрутизатор R19 находится в зоне 101 и получает только маршрут по умолчанию.
5. Маршрутизатор R20 находится в зоне 102 и получает все маршруты, кроме маршрутов до сетей зоны 101.

### Решение:


### 1. Разделение сети на зоны.

Графическая схема разделения по зонам представлена ниже:

![](/Labs/Lab05//pics/org/Areas_Org.jpg)

- Роутеры R14, R15 находятся в Area 0 - backbone.
- Роутеры R12, R13 находятся в зоне Area 10.
- Роутер  R19 находится в зоне  Area 101
- Роутер  R20 находится в зоне  Area 102

Роутеры R14, R15 являются ABR (Area Border Router) для зон 101, 10, 102.

Конфигруация OSPF на роутерах:

R14:
![](/Labs/Lab05/pics/configs/R14_conf.jpg)

<br>

R15:
![](/Labs/Lab05/pics/configs/R15_conf.jpg)

<br>

R12:
![](/Labs/Lab05/pics/configs/R12_conf.jpg)

<br>

R13:
![](/Labs/Lab05/pics/configs/R13_conf.jpg)


<br>

R19:
![](/Labs/Lab05/pics/configs/R19_conf.jpg)

<br>

R20:
![](/Labs/Lab05/pics/configs/R20_conf.jpg)




### 2. Настроика фильтрации между зонами

- #### Маршрутизаторы R12-R13 находятся в зоне 10. Дополнительно к маршрутам должны  получать маршрут по умолчанию.

Для того, чтобы мрашрутизаторы R12-R13 получали также мпршрут по умолчанию на роутере R14(ABR) установлена настройка "deafult-information orginate", что позволит инжектировать путь по умолчанию в маршурты OSPF.

Проверим маршруты на роутерах R12 - R13:

R12:
![](/Labs/Lab05/pics/routes/R12_routes.jpg)


R13:
![](/Labs/Lab05/pics/routes/R13_routes.jpg)

Как видно, маршрут по умолчанию получается обоими маршрутизатором через OSPF.


- #### Маршрутизатор R19 находится в зоне 101 и получает только маршрут по умолчанию.

Маршрут по умолчанию получается роутером R19 за счет настройки "deafult-information orginate" на ABR роутере R14.

Для того, чтобы общие маршруты не передавались на роутер R19, в настройке R14 включена опция "no summary" для area 101. Таким образом, ни один маршрут из соседних зон не будет передаваться в зону 101.

Проверим таблицу маршрутизации на роутере R19:

R19:
![](/Labs/Lab05/pics/routes/R19_routes.jpg)

Как видно, через ospf передан только маршрут по умолчанию.

- #### Маршрутизатор R20 находится в зоне 102 и получает все маршруты, кроме маршрутов до сетей зоны 101

Для реализации этого сценария реализован фильтр посредством префиксов на роутере R15:

![](/Labs/Lab05/pics/configs/R15_ip_prefix.jpg)


Проверим таблицу маршрутизации на роутере R20:

R20:
![](/Labs/Lab05/pics/routes/R20_routes.jpg)


Как видно, присутствую все маршруты, кроме маршрутов из зоны 101.

Обновленные конфигурации для роутеров зоны Москва доступны в папке "config"